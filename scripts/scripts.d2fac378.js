"use strict";function Marker(){this.markerArray=""}var app=angular.module("app",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ui.bootstrap","ngTouch","uiGmapgoogle-maps"]);app.config(function(a){a.when("/",{controller:"EventListController",templateUrl:"views/main.html"}).when("/event/:id",{controller:"EventShowController",templateUrl:"views/show.html"}).when("/markers/",{controller:"LocationController",templateUrl:"views/location.html"}).otherwise({redirectTo:"/"})}),app.controller("EventListController",["$scope","events",function(a,b){a.events=[],a.loading=!0,a.title="Company Name",a.promo="Pr√≥ximos Eventos",b.query().$promise.then(function(b){a.isCollapsed=!0,a.events=b,a.loading=!1})}]),app.controller("EventShowController",["$scope","$routeParams","events",function(a,b,c){c.get({id:b.id}).$promise.then(function(c){console.log(c),a.detail=c,a.map={center:{latitude:c.lat,longitude:c.lng},options:{mapTypeControl:!1,streetViewControl:!1,optimized:!0,draggable:!1},zoom:16},a.marker={id:b.id,coords:angular.copy(a.map.center)}})}]),app.controller("LocationController",["$scope","MarkersResource",function(a,b){a.title="Events Location",a.map={center:{latitude:4.64862585,longitude:-74.24823761},options:{mapTypeControl:!1,streetViewControl:!1,optimized:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},zoom:10,maxZoom:15,minZoom:10,events:{click:function(){a.itemSelected=!1}},clusterOptions:{minimumClusterSize:10}},a.map.markers=[];var c=b.query(function(b){angular.forEach(b,function(b){a.map.markers.push({id:b.markerArray.id,latitude:b.markerArray.coords.latitude,longitude:b.markerArray.coords.longitude,title:b.markerArray.window.title,inicio:b.markerArray.window.inicio})}),a.showloadedmap=!0});a.map.markersEvents={click:function(b,c,d,e){console.log("Marker was clicked ("+b+", "+c),a.map.window.model=d,a.map.window.title=d.title,a.map.window.inicio=d.inicio,a.map.window.show=!0}},a.map.window={marker:{},show:!1,closeClick:function(){this.show=!1},options:{},title:""},a.onMarkerClicked=function(a){console.log("Marker was clicked"),console.log(a)},a.closeClick=function(){this.window=!1},console.log(c)}]),app.factory("events",function(a){var b=a("http://sip.pulsarit.co/api/events/:id");return b}),app.factory("MarkersResource",["$resource",function(a){var b="http://sip.pulsarit.co/api/events/",c=a(b,{},{query:{method:"GET",params:{},isArray:!0,transformResponse:function(a,b){var c=JSON.parse(a),d=[];return angular.forEach(c,function(a){var b=new Marker;b.markerArray={id:a.event.id,coords:{latitude:a.event.lat,longitude:a.event.lng},window:{title:a.event.nombre,inicio:a.event.inicio,fin:a.event.fin,details:a.event.details}},d.push(b)}),d}}});return c}]),angular.module("app").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/location.html",'<div class="main"> <h2>{{ title }}</h2> <ui-gmap-google-map class="col-md-12" center="map.center" zoom="map.zoom" draggable="false" options="map.options"> <ui-gmap-markers models="map.markers" docluster="true" coords="\'self\'" icon="\'icon\'" options="\'options\'" idkey="id" clusteroptions="map.clusterOptions" events="map.markersEvents " islabel="true"> <ui-gmap-window show="map.window.show" coords="map.window.model" options="map.window.options" closeclick="map.window.closeClick()"> <div> <p>{{ map.window.title }}</p> <p>{{ map.window.inicio | date }}</p> <p><a class="btn btn-primary" ng-href="#/event/{{ map.window.model.id }}"><i class="fa fa-eye"></i> Ver Evento</a></p> </div> </ui-gmap-window> </ui-gmap-markers> </ui-gmap-google-map> <div class="clearfix"></div> </div>'),a.put("views/main.html",'<div class="main"> <h2>{{ promo }}</h2> <!-- Angular Test --> <div ng-cloak> <div ng-show="loading">Cargando...</div> <div ng-show="!loading && events.length == 0" class="title">No hay datos</div> <div ng-repeat-start="event in events track by event.event.id " class="col-md-6"> <div class="thumbnail"> <img ng-src="" src="images/event.a6bdb251.jpg"> <p class="title">{{ event.event.nombre }}</p> <p class="price"><i class="ace-icon fa fa-users bigger-130"></i> {{ event.registrants }}</p> <p class="date">{{ event.event.inicio | date }} </p> <div class="rating"> <a class="likes" ng-href="#/event/{{ event.event.id }}"><i class="fa fa-map-marker"></i> </a> <p class="likes" ng-click="isCollapsed = !isCollapsed"><i class="fa fa-search"></i> </p> <p class="likes" ng-click="minusOne($index)"><i class="fa fa-user-plus"></i> </p> </div> <hr> <div uib-collapse="isCollapsed"> <div class="well well-lg"> <p class="date">Detalles : <br>{{ event.event.details }} </p> </div> </div> </div> </div> <div ng-if="$odd" style="clear: both"></div> <div ng-repeat-end></div> </div> <hr> </div>'),a.put("views/show.html",'<div class="main"> <h1> {{ detail.nombre }} </h1> <!--<h2> {{ detail.inicio | date:\'medium\' }} -> {{ detail.fin | date:\'medium\' }}</h2>--> <img ng-src=""> <div class="col-md-6"> <div class="panel panel-default"> <div class="panel-body"> <p>Inicio : {{ detail.inicio | date:\'medium\' }}</p> <p>Fin : {{ detail.fin | date:\'medium\' }}</p> <p>Ubicaci&oacute;n : {{ detail.ubicacion }}</p> <p>Detalles : {{ detail.details }}</p> </div> </div> </div> <ui-gmap-google-map class="col-md-6" center="map.center" zoom="map.zoom" draggable="false" options="map.options"> <ui-gmap-marker idkey="marker.id" coords="marker.coords"></ui-gmap-marker> </ui-gmap-google-map> <div class="clearfix"></div> </div>')}]);